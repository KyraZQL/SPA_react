(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,a){e.exports=a(299)},156:function(e,t,a){},158:function(e,t,a){},178:function(e,t,a){},299:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(43),s=a.n(i),r=(a(156),a(23)),c=a(24),l=a(27),u=a(25),m=a(26),h=a(311),d=a(307),v=a(312),p=(a(157),a(158),a(91)),f=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:p.Home},o.a.createElement("h1",{className:p.HomeHeader},"Welcome to the MP2!"))}}]),t}(n.Component),g=a(310),b=a(142),E=a(33),_=a.n(E),y=(a(178),function(e){function t(){var e;Object(r.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={value:"",genres:[],selectedGenre:"",movies:[],filteredmovies:[]},e.baseUrl="https://api.themoviedb.org/3/genre/movie/list?api_key=",e.API_KEY="cf85a3c0ab8d5363ec6e2d139c08cdbb",e.suffix="&language=en-US",e.mbaseUrl="https://api.themoviedb.org/3/discover/movie?api_key=",e.msuffix="&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=";var a="".concat(e.baseUrl).concat(e.API_KEY).concat(e.suffix);_.a.get(a).then(function(t){console.log(t),e.setState({genres:t.data.genres}),console.log(e.state.genres)}).catch(function(e){console.log(e)});for(var n=1,o=[];n<21;){var i="".concat(e.mbaseUrl).concat(e.API_KEY).concat(e.msuffix).concat(n);_.a.get(i).then(function(t){console.log(t),o.push.apply(o,t.data.results),console.log(o),o.map(function(e){console.log("got movie",e.id)}),e.setState({movies:o,filteredmovies:o})}).catch(function(e){console.log(e)}),n++}return e.state.movies.map(function(e){console.log("got movie",e.id)}),console.log(e.state.movies),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"clickHandler",value:function(e){if(console.log("got new item id ".concat(e.target.id)),this.setState({selectedGenre:e.target.id}),this.state.movies.map(function(e,t){console.log("before filter movie",e.id,t)}),""===e.target.id)this.setState(function(e){return{filteredmovies:e.movies}});else{var t=parseInt(e.target.id);this.setState(function(e){return{filteredmovies:e.movies.filter(function(e){return console.log("movie genre ids",e.genre_ids,"id",t),console.log(e.genre_ids.includes(t)),e.genre_ids.includes(t)})}})}this.state.filteredmovies.map(function(e,t){console.log("after filter movie",e.id,t)})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"Gallery"},o.a.createElement("div",{className:"GenreContainer"},o.a.createElement("div",{id:"",onClick:this.clickHandler.bind(this),className:"genre"},o.a.createElement("p",null,"All")),this.state.genres.map(function(t){return o.a.createElement("div",{key:t.id,id:t.id,onClick:e.clickHandler.bind(e),className:"genre"},o.a.createElement("p",null,t.name))})),o.a.createElement("div",{className:"MovieContainer"},this.state.filteredmovies.map(function(t){return o.a.createElement(d.a,{key:t.id,to:{pathname:"/detail/"+t.id,state:{list:e.state.filteredmovies}}},o.a.createElement(g.a,null,o.a.createElement(g.a.Content,null,o.a.createElement(b.a,{src:"https://image.tmdb.org/t/p/w500"+t.poster_path}),o.a.createElement(g.a.Header,null,o.a.createElement("div",null,o.a.createElement("p",{className:"black"},t.original_title))))))})))}}]),t}(n.Component)),k=a(18),O=a(308),j=a(300),S=a(38),C=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={value:"",movies:[],sortedmovies:[],sortfeature:"",sortorder:"",showMenu:!1},e.baseUrl="https://api.themoviedb.org/3/search/movie?api_key=",e.API_KEY="cf85a3c0ab8d5363ec6e2d139c08cdbb",e.middle="&language=en-US&query=",e.suffix="&page=1&include_adult=false",e.inputChangeHandler=e.inputChangeHandler.bind(Object(k.a)(Object(k.a)(e))),e.clickHandler=e.clickHandler.bind(Object(k.a)(Object(k.a)(e))),e.sortByAsc=e.sortByAsc.bind(Object(k.a)(Object(k.a)(e))),e.sortByDec=e.sortByDec.bind(Object(k.a)(Object(k.a)(e))),e.showMenu=e.showMenu.bind(Object(k.a)(Object(k.a)(e))),e.changeFeature=e.changeFeature.bind(Object(k.a)(Object(k.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"clickHandler",value:function(){var e=this,t="".concat(this.baseUrl).concat(this.API_KEY).concat(this.middle).concat(this.state.value).concat(this.suffix);_.a.get(t).then(function(t){console.log(t),e.setState({movies:t.data.results,sortedmovies:t.data.results}),console.log(e.state.movies)}).catch(function(e){console.log(e)})}},{key:"inputChangeHandler",value:function(e){this.setState({value:e.target.value})}},{key:"showMenu",value:function(e){e.preventDefault(),this.setState({showMenu:!0})}},{key:"changeFeature",value:function(e){console.log("change feature"+e.target.id),this.setState({sortfeature:e.target.id}),"asc"===this.state.sortorder?this.sortByAsc():"dec"===this.state.sortorder&&this.sortByDec()}},{key:"sortByAsc",value:function(){this.setState({sortorder:"asc"});var e=[];console.log("this.state",this.state);var t=this.state.movies;null!==t&&("title"===this.state.sortfeature?e=t.sort(function(e,t){return console.log("movie title",e.title,t.title),e.title-t.title}):"count"===this.state.sortfeature?(e=t.sort(function(e,t){return console.log("movie count",e.vote_count,t.vote_count),console.log(e.vote_count-t.vote_count),e.vote_count-t.vote_count})).map(function(e){console.log("after sort",e.vote_count)}):"avg"===this.state.sortfeature&&(e=t.sort(function(e,t){return e.vote_average-t.vote_average})),this.setState({sortedmovies:e}))}},{key:"sortByDec",value:function(){this.setState({sortorder:"dec"});var e=[];console.log("this.state",this.state);var t=this.state.movies;null!==t&&("title"===this.state.sortfeature?e=t.sort(function(e,t){return console.log("movie title",e.title,t.title),t.title-t.title}):"count"===this.state.sortfeature?e=t.sort(function(e,t){return t.vote_count-e.vote_count}):"avg"===this.state.sortfeature&&(e=t.sort(function(e,t){return t.vote_average-e.vote_average})),this.setState({sortedmovies:e}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:S.InfoInput},o.a.createElement(O.a,{onChange:this.inputChangeHandler,label:"Search movie",placeholder:"Input # here!",value:this.state.value}),o.a.createElement(j.a,{onClick:this.clickHandler},"GET"),o.a.createElement("div",{className:S.SortFeature},o.a.createElement("div",null,this.state.showMenu?o.a.createElement("div",{className:"Menu"},o.a.createElement(j.a,{onClick:this.changeFeature,id:"count"}," Vote Count "),o.a.createElement(j.a,{onClick:this.changeFeature,id:"avg"}," Vote Average "),o.a.createElement(j.a,{onClick:this.sortByAsc}," Asc "),o.a.createElement(j.a,{onClick:this.sortByDec}," Dec ")):o.a.createElement(j.a,{onClick:this.showMenu},"Show menu")))),o.a.createElement("div",{className:S.MovieList},this.state.sortedmovies.map(function(t){return o.a.createElement("div",{key:t.id},o.a.createElement(d.a,{className:S.ListElem,to:{pathname:"/detail/"+t.id,state:{list:e.state.movies}}},o.a.createElement(b.a,{className:S.ListElemImg,src:"https://image.tmdb.org/t/p/w500"+t.poster_path}),o.a.createElement("div",{className:S.MovieInfo},o.a.createElement("h2",null,t.title),o.a.createElement("p",null,"Overview: ",t.overview),o.a.createElement("p",null,"Vote Count: ",t.vote_count," Vote Average: ",t.vote_average))))})))}}]),t}(n.Component),w=a(309),x=a(39),I=function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={properties:e.location.state.list,property:e.match.params.id,info:"",curidx:"",previd:"",nextid:""},a.baseUrl="https://api.themoviedb.org/3/movie/",a.API_KEY="?api_key=cf85a3c0ab8d5363ec6e2d139c08cdbb",a.suffix="&language=en-US";var n="".concat(a.baseUrl).concat(a.state.property).concat(a.API_KEY).concat(a.suffix);return _.a.get(n).then(function(e){a.setState({info:e.data})}).catch(function(e){console.log("error",e)}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("will mount",this.state.property),this.state.properties.map(function(e){console.log("got elem in the list"+e.id)});var t=this.state.properties.findIndex(function(t){return e.state.property==t.id});console.log("cur Index",t);var a=0;if(0!==t&&-1!==t){var n=t-1;a=this.state.properties[n].id}else{var o=this.state.properties.length-1;a=this.state.properties[o].id}if(console.log("prev id should be "+a),this.setState({previd:a}),t!==this.state.properties.length-1&&-1!==t){var i=t+1;a=this.state.properties[i].id}else{a=this.state.properties[0].id}console.log("next id should be "+a),this.setState({nextid:a})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.state.property!==e.match.params){var a=e.match.params.id,n=e.location.state.list;console.log("should update to "+a+"update property--------- "+this.state.property);var o=this.state.properties.findIndex(function(e){return t.state.property==e.id});console.log("cur Index",o);var i=0;if(0!==o&&-1!==o){var s=o-1;i=this.state.properties[s].id}else{var r=this.state.properties.length-1;i=this.state.properties[r].id}console.log("prev id should be "+i);var c=0;if(o!==this.state.properties.length-1&&-1!==o){var l=o+1;c=this.state.properties[l].id}else{c=this.state.properties[0].id}console.log("next id should be "+c);var u="".concat(this.baseUrl).concat(a).concat(this.API_KEY).concat(this.suffix);_.a.get(u).then(function(e){t.setState({info:e.data})}).catch(function(e){console.log("error",e)}),this.setState({properties:n,property:a,previd:i,nextid:c})}}},{key:"render",value:function(){return o.a.createElement(w.a,{className:x.DetailContainer},o.a.createElement("div",{className:"ButtonContainer"},o.a.createElement(d.a,{className:x.Prev,to:{pathname:"/detail/"+this.state.previd,state:{list:this.state.properties}}},"\u276e Prev"),o.a.createElement(d.a,{className:x.Next,to:{pathname:"/detail/"+this.state.nextid,state:{list:this.state.properties}}},"Next \u276f")),o.a.createElement("h1",{className:x.DetailContainerP},this.state.info.title),o.a.createElement("img",{className:"movie",src:"https://image.tmdb.org/t/p/w500"+this.state.info.backdrop_path}),o.a.createElement("p",{className:x.DetailContainerP},this.state.info.overview),o.a.createElement("p",{className:x.DetailContainerP},this.state.info.homepage))}}]),t}(n.Component),N=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement("div",null,o.a.createElement("header",null,o.a.createElement("ul",{className:"nav"},o.a.createElement("li",null,o.a.createElement(d.a,{to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(d.a,{to:"/gallery"},"gallery")),o.a.createElement("li",null,o.a.createElement(d.a,{to:"/search"},"search")))),o.a.createElement("hr",null),o.a.createElement(v.a,{exact:!0,path:"/",component:f}),o.a.createElement(v.a,{path:"/gallery",component:y}),o.a.createElement(v.a,{path:"/search",component:C}),o.a.createElement(v.a,{path:"/detail/:id",component:I})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},38:function(e,t,a){e.exports={MovieList:"SearchList_MovieList__3udCY",InfoInput:"SearchList_InfoInput__18HtK",SortFeature:"SearchList_SortFeature__nhSmB",ListElem:"SearchList_ListElem__-VQH9",ListElemImg:"SearchList_ListElemImg__lWu3e",MovieInfo:"SearchList_MovieInfo__2TXIR"}},39:function(e,t,a){e.exports={DetailContainer:"DetailView_DetailContainer__1iF6Q",DetailContainerP:"DetailView_DetailContainerP__JxID8",Prev:"DetailView_Prev__2ZK33",Next:"DetailView_Next__-4Xf3"}},91:function(e,t,a){e.exports={Home:"Home_Home__3rTom"}}},[[151,1,2]]]);
//# sourceMappingURL=main.54d4d62e.chunk.js.map